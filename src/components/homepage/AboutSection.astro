---

import ButtonGroup from '@components/homepage/ButtonGroup.astro';
import Features from '@components/homepage/Features.astro';
import SponsorSegment from '@components/homepage/SponsorSegment.astro';
import { t } from '@/lib/i18n-service';

interface Props {
  lang?: string;
}

const { lang = 'en' } = Astro.props;

const supportedChecksKeys = [
  'checks.archive_history',
  'checks.block_list',
  'checks.carbon_footprint',
  'checks.cookies',
  'checks.dns_server',
  'checks.dns_records',
  'checks.dnssec',
  'checks.site_features',
  'checks.firewall_types',
  'checks.ip_address',
  'checks.headers',
  'checks.hsts',
  'checks.http_security',
  'checks.linked_pages',
  'checks.mail_config',
  'checks.open_ports',
  'checks.quality_check',
  'checks.global_rank',
  'checks.redirects',
  'checks.robots_txt',
  'checks.screenshot',
  'checks.security_txt',
  'checks.sitemap',
  'checks.social_tags',
  'checks.ssl_certificate',
  'checks.uptime_status',
  'checks.tech_stack',
  'checks.known_threats',
  'checks.tls_version',
  'checks.trace_route',
  'checks.txt_records',
  'checks.whois_lookup'
];

// 获取本地化的检查项列表
const supportedChecks = supportedChecksKeys.map(key => t(key, lang) || key.split('.').pop());

const links = [
  {
    title: t('about.view_on_github', lang) || 'View on GitHub',
    url: 'https://github.com/lissy93/web-check',
    icon: 'github',
    isCta: true,
  },
  {
    title: t('about.deploy_your_own', lang) || 'Deploy your Own',
    url: `/self-hosted-setup?lang=${lang}`,
    icon: 'rocket',
    isCta: false,
  },
  {
    title: t('about.use_api', lang) || 'Use the API',
    url: `/web-check-api?lang=${lang}`,
    icon: 'code',
    isCta: false,
  },
];

---

<div class="about-section">
  <div class="features-wrap">
    <h4>{t('about.ready_to_start', lang) || 'Ready to get started?'}</h4>
    <p class="what">
      {t('about.with_over_checks', lang) || 'With over '}<span>{t('about.supported_checks_number', lang) || '30 supported checks'}</span>
      {t('about.instant_analysis', lang) || ' you can view and analyse key website information in an instant'}
    </p>
  </div>
  <hr />
  <Features supportedChecks={supportedChecks} />
  <ButtonGroup links={links} lang={lang} />
  <hr />
  <SponsorSegment lang={lang} />
</div>

<style lang="scss">
  .about-section {
    width: 80vw;
    margin: 0 auto;
  }
  .features-wrap {
    width: 80vw;
    max-width: 650px;
    margin: 0 auto;
  }
  h4 {
    text-transform: capitalize;
    font-size: 1.8rem;
    text-align: center;
    background: linear-gradient(90deg, var(--text-color), var(--primary));
    background-clip: text;
    text-fill-color: transparent;
    color: transparent;
  }
  .what {
    text-align: center;
    font-size: 1.2rem;
    line-height: 1.5;
    span {
      color: var(--primary);
      font-style: italic;
    }
  }
  hr {
    width: 3rem;
    margin: 3rem auto;
    color: var(--primary);
  }
</style>
